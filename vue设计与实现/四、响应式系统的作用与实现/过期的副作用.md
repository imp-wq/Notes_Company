## 过期的副作用

* watch导致的竞态问题：
  * 如果watch的副作用函数是一个异步操作，比如发送请求，后发送的请求，服务器有可能先返回数据，即产生竞态问题。
  * 因此需要能够在每次执行副作用之前，执行一些清理操作，让老的过期副作用无效。
  * 比如对于2个请求的场景，可以设置一个expired=false的变量。通过在第二次请求之前设置expired为true，表示第一次请求无效。
* onInvalidate函数实现：
  * 通过cleanup变量保存过期回调，用于清理老的副作用。
  * 通过onInvalidate函数注册过期回调，将其传入调度器。