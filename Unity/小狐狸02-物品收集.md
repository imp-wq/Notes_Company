## 物品收集

* 放置cherry物品：

  * 使用sprite承载cherry，pixels per unit->16, sorting layer->frontground.
  * 设置碰撞体：add component->box collider, is trigger

* 收集物品逻辑：

  PlayerController script中：

  * 编写OnTriggerEnter2D方法，接收一个collision参数。
  * 通过在unity中，为cherry等收集物品添加`Collections` tag，再通过collision.tag方法取到碰撞的物体的tag，判断吃cherry事件。
  * 销毁物体：调用Destroy(GameObject obj)方法。
  * 记录物品数量：创建变量CherryQuantity。

## Prefabs

* 在Assets根目录中创建Prefabs folder，用于保存所有的预制文件。
* 将hierarchy中的play、cherry拖入prefabs folder，会保存其所有参数，方便统一管理。
* 修改prefabs中play, cherry等参数，所有游戏中相应物品的参数也会随之修改。

### Environment

* 设置environment, ground等图层，用于装饰性的props。
* 通过Sprite Renderer->Additional Setting设置图层，sorting layer设置图层顺序，order in layer设置图层内物品的顺序。

## 优化

### 空中碰到物体卡住

* 原因：头部和脚部的collider之间的摩擦力，需要通过修改头部和脚部的材质来解决。
* 创建materials文件夹用于保存材质, create physical 2d material, friction摩擦力->0。

### 禁止空中跳跃

* 跳跃时增加判断条件：只有与地面接触时才允许跳跃。

## UI界面

User interface。

* Canvas：创建canvas，所有ui元素都放在单独的canvas中，不与其他部分放在一块。

* Legacy->Text(Legacy)：用于文字显示。
  * script中获取text：新建public Text cherryNum成员变量，unity中拖入。
  * 在collection事件触发时，cherry数量变化后，使cherryNum文本也变化。注意int型变量通过toString方法转换成string类型。
  * Cherry数量锁定显示左上角，防止全屏时数量显示位置跑偏：
    * 点击Anchor presets->选择左上角。
* script：需`using UnityEngine.UI;`后，才能使用UI对应的组件类。

## Enemy

* 添加：

  * 添加sprite，添加动画，设置图层player。
  * 添加rigitbody
  * 添加collider

* 消灭敌人：

  * 为敌人添加`Enemies` tag。
  * 踩死敌人效果：在playerController script的OnCollision2D方法中，通过collision检测碰撞敌人，如果是在falling状态，则将敌人消灭。

* 受伤：

  * 判断，只要不是在falling状态下接触敌人，触发受伤，后退。

  * 问题：

    * 由于在update中不断调用move，修改velocity的值，因此在OnCollision2D中修改的velocity会立刻被update中move修改的覆盖。

    * 解决：

      * 设置isHurt字段，在受伤状态下不调用move。
      * 在update中判断，如果处于hurt状态，且速度小于0.1，解除hurt状态，允许移动。

      