## 物品收集

* 放置cherry物品：

  * 使用sprite承载cherry，pixels per unit->16, sorting layer->frontground.
  * 设置碰撞体：add component->box collider, is trigger

* 收集物品逻辑：

  PlayerController script中：

  * 编写OnTriggerEnter2D方法，接收一个collision参数。
  * 通过在unity中，为cherry等收集物品添加`Collections` tag，再通过collision.tag方法取到碰撞的物体的tag，判断吃cherry事件。
  * 销毁物体：调用Destroy(GameObject obj)方法。
  * 记录物品数量：创建变量CherryQuantity。

## Prefabs

* 在Assets根目录中创建Prefabs folder，用于保存所有的预制文件。
* 将hierarchy中的play、cherry拖入prefabs folder，会保存其所有参数，方便统一管理。
* 修改prefabs中play, cherry等参数，所有游戏中相应物品的参数也会随之修改。

### Environment

* 设置environment, ground等图层，用于装饰性的props。
* 通过Sprite Renderer->Additional Setting设置图层，sorting layer设置图层顺序，order in layer设置图层内物品的顺序。

## 优化

### 空中碰到物体卡住

* 原因：头部和脚部的collider之间的摩擦力，需要通过修改头部和脚部的材质来解决。
* 创建materials文件夹用于保存材质, create physical 2d material, friction摩擦力->0。

### 禁止空中跳跃

* 跳跃时增加判断条件：只有与地面接触时才允许跳跃。

### 从高处落下增加falling状态

* 在SwitchAnimation函数中添加判断，如果不接触地面且y轴方向速度小于0.1，状态切换为falling。

  注意animator中切换不要勾选has transition time，否则会导致切换有时间延迟。

## UI界面

User interface。

* Canvas：创建canvas，所有ui元素都放在单独的canvas中，不与其他部分放在一块。

* Legacy->Text(Legacy)：用于文字显示。
  * script中获取text：新建public Text cherryNum成员变量，unity中拖入。
  * 在collection事件触发时，cherry数量变化后，使cherryNum文本也变化。注意int型变量通过toString方法转换成string类型。
  * Cherry数量锁定显示左上角，防止全屏时数量显示位置跑偏：
    * 点击Anchor presets->选择左上角。
* script：需`using UnityEngine.UI;`后，才能使用UI对应的组件类。

## Enemy

* 添加：

  * 添加sprite，添加动画，设置图层player。
  * 添加rigitbody
  * 添加collider

* 消灭敌人：

  * 为敌人添加`Enemies` tag。
  * 踩死敌人效果：在playerController script的OnCollision2D方法中，通过collision检测碰撞敌人，如果是在falling状态，则将敌人消灭。

* 受伤：

  * 判断，只要不是在falling状态下接触敌人，触发受伤，后退。

  * 问题：

    * 由于在update中不断调用move，修改velocity的值，因此在OnCollision2D中修改的velocity会立刻被update中move修改的覆盖。

    * 解决：

      * 设置isHurt字段，在受伤状态下不调用move。
      * 在update中判断，如果处于hurt状态，且速度小于0.1，解除hurt状态，允许移动。


### 移动逻辑

* 为frog创建子项目leftBoundary, rightBoundary，指示左边界和右边界。
* 问题：子项目默认会随着父项目一起移动，起不到边界的效果。
  * 解决：在start阶段调用tramsform.DetachChildren()方法，与子项目分离。
  * 解决2：在start阶段获取leftBoundary, rightBoundary的x坐标，获取后直接销毁两子元素，以节省内存空间。

### 死亡Animator

* 死亡在任何状态都有可能发生，因此Any State->death。
* 通过添加trigger parameter来触发death。trigger没有值，只有进行触发。script中通过animator.setTrigger方法进行触发。
* 在PlayerController类中获取敌人类的对象：
  * 在OnCollisionEnter2D方法中，通过`collision.gameObject.GetComponent<敌人类>()`方法获取对象。

## Animation Events

* Animation界面中，点击add event，在某一帧为动画添加事件。
* 点击事件，可以在function中选择在script中编写的函数，进行执行。即每次该动画执行到event时，调用一次该函数。
* 通过在idle动画后调用movement函数，让青蛙执行一次idle动画后，在jump和fall状态都会具有movement给的初速度。

## c#继承

* base：和java的super一个意思。