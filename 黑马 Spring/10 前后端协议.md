## 协议

* 表现层数据封装模型，将数据放入一个对象，以便前后端交互。

  * data：存放数据。
  * code：标识操作的类型，成功与失败。
  * msg：提示信息。

  ```java
  public class Result {
      private Object data;
      private Integer code;
      private String message;
  }
  ```

## 异常处理

* 各个层均将异常往上抛，汇集到表现层统一处理。

* 利用AOP思想对异常进行处理。

* 在表现层controller中创建`ProjectExceptionAdvice`类处理异常。

  * 添加`@RestControllerAdvice`注解，注册为Spring MVC的异常处理类。

    该类需要被spring mvc加载。放在controller包中，可以被扫描到。

  * 在类中创建处理异常的方法，并通过`@ExceptionHandler(异常类.class)`注解设置该方法处理哪类异常。

  ```java
  @RestControllerAdvice
  public class ProjectExceptionAdvice {
      @ExceptionHandler(Exception.class)
      public Result handleException(Exception exception) {
          return new Result(0, null,"发成了错误");
      }
  }
  ```


### 异常分类处理方案

* 业务异常Business Exception
  * 不规范用户行为产生的异常
  * 发送消息给客户，提醒规范操作
* 系统异常System Exception
  * 项目运行中可预计但无法避免的异常
  * 安抚用户，告知运维，记录日志。
* 其他异常
  * 预计不到的异常
  * 安抚用户，告知运维，记录日志。

#### exception包

新建exception包用户存放异常的类。

* 创建code字段用于记录错误码，对异常进行分类。

