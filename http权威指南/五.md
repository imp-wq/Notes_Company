## 五、web服务器

​	Web服务器实现了HTTP和相关的TCP连接处理。

* Web服务器逻辑和OS共同负责管理TCP连接，OS负责：
  * 管理底层硬件细节
  * 提供TCP/IP网络支持，装载Web资源文件系统
  * 控制计算活动的进程管理

* web服务器会做些什么：

  1. 建立连接
  2. 接收请求
  3. 处理请求
  4. 访问资源
  5. 构建响应
  6. 发送响应
  7. 记录事务处理过程：将已完成事务的有关内容记录到日志文件中。


### 一、接收客户端连接

* 如果客户端已经打开了一条持久连接，可以通过其发送请求。否则会打开一条新连接。
* 一旦新连接建立并被服务器接受，服务器会将其跳到现存Web服务器连接列表中，以便监视连接上的数据传输。
* 反向DNS：将客户端IP地址转换成主机名。
* ident协议

### 二、接收请求报文

* 连接上有数据到达时，服务器会从连接中读出数据，并解析出请求报文。
* 解析请求报文：
  * 查找请求方法、URI、版本号、报文首部等信息。
  * 根据首部Content-Length读取请求主体。

### 三、处理请求

### 四、对资源的映射及访问

* 将请求报文的中URI映射为Web服务器上的内容。