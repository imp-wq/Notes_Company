# MyBatis

[mybatis – MyBatis 3 | Getting started](https://mybatis.org/mybatis-3/getting-started.html)

MyBatis是一款持久层框架，用于简化JDBC开发。

* Java EE的三层架构：
  * 表现层：页面展示
  * 业务层：逻辑处理
  * 持久层：将数据保存到数据库
* 针对JDBC的缺点的优化：
  * 硬编码=>配置文件
    * 注册驱动，获取连接，列名
    * sql语句
  * 操作繁琐=>自动完成
    * 手动封装结果集

## 基本使用

* 通过maven导包，my-batis和mysql

* 核心配置文件mybatis-config.xml，依据官网提示写。

  ```xml
  <?xml version="1.0" encoding="UTF-8" ?>
  <!DOCTYPE configuration
          PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
          "https://mybatis.org/dtd/mybatis-3-config.dtd">
  <configuration>
      <environments default="development">
          <environment id="development">
              <transactionManager type="JDBC"/>
              <dataSource type="POOLED">
                  <!--数据库连接信息，驱动等-->
                  <property name="driver" value="com.mysql.jdbc.Driver"/>
                  <property name="url" value="jdbc:mysql:///mybatis?useSSL=false"/>
                  <property name="username" value="root"/>
                  <property name="password" value="mysql"/>
  
              </dataSource>
          </environment>
      </environments>
      <mappers>
          <!--加载sql映射文件，填写映射文件的路径-->
          <mapper resource="UserMapper.xml"/>
      </mappers>
  </configuration>
  ```

* sql映射文件，`[表名]Mapper.xml`

  * namespace：名称空间
  * resultType：返回类型，选择一个已有的类
  * id：此条sql语句的唯一标识

  ```xml
  <?xml version="1.0" encoding="UTF-8" ?>
  <!DOCTYPE mapper
          PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
          "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <!--在这里进行配置-->
  <mapper namespace="myNamespace">
      <select id="selectAll" resultType="com.itheima.pojo.User">
          select * from tb_user;
      </select>
  </mapper>
  ```

* 代码编写：

  * 通过SqlSession对象执行sql：
    * selectList查询多条，selectOne查询一条。
    * 以`namespace.id`的形式确定sql语句。

### troubleshooting

* 不支持的发行版本

  [错误“ Java：不支持发行版本5”的正确解决方案_星神学Java的博客-CSDN博客_不支持发行版本5](https://blog.csdn.net/qq_41428418/article/details/124169175)